# MinerU2.5æœ¬åœ°éƒ¨ç½²æ•™ç¨‹


## ç¬¬ä¸€æ­¥ï¼šç¯å¢ƒå‡†å¤‡

åœ¨å¼€å§‹ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦ç¡®ä¿ç³»ç»Ÿç¯å¢ƒé…ç½®æ­£ç¡®ã€‚

### 1.1 æ£€æŸ¥ç³»ç»Ÿç¯å¢ƒ

é¦–å…ˆæ£€æŸ¥ä½ çš„CUDAç¯å¢ƒå’ŒGPUçŠ¶æ€ï¼š

```bash
# æ£€æŸ¥CUDAç‰ˆæœ¬ï¼ˆéœ€è¦CUDA 11.8æˆ–ä»¥ä¸Šï¼‰
nvcc --version
# nvcc æ˜¯ NVIDIA CUDA Compiler çš„ç¼©å†™ï¼Œå®ƒæ˜¯NVIDIAæä¾›çš„CUDAç¼–è¯‘å™¨å·¥å…·

# æ£€æŸ¥GPUçŠ¶æ€å’Œæ˜¾å­˜
nvidia-smi
# smiåœ¨NVDIAçš„è¯­å¢ƒä¸‹ç‰¹æŒ‡ NVIDIA System Management Interface
```

**é‡è¦æç¤º**ï¼šå¦‚æœä½ æ²¡æœ‰NVIDIAæ˜¾å¡ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨CPUç‰ˆæœ¬ï¼Œåªæ˜¯é€Ÿåº¦ä¼šæ…¢ä¸€äº›ã€‚

### 1.2 åˆ›å»ºä¸“ç”¨è™šæ‹Ÿç¯å¢ƒ

ä¸ºäº†é¿å…ä¾èµ–å†²çªï¼Œå¼ºçƒˆå»ºè®®åˆ›å»ºç‹¬ç«‹çš„è™šæ‹Ÿç¯å¢ƒï¼š

**æ–¹æ¡ˆä¸€ï¼šé»˜è®¤è·¯å¾„åˆ›å»º**
```bash
# åˆ›å»ºPython 3.10ç¯å¢ƒ
conda create -n mineru python=3.10
conda activate mineru
```

**æ–¹æ¡ˆäºŒï¼šè‡ªå®šä¹‰è·¯å¾„åˆ›å»ºï¼ˆæ¨èï¼‰**
```bash
# æŒ‡å®šå®‰è£…è·¯å¾„ï¼ˆé€‚åˆCç›˜ç©ºé—´ä¸è¶³çš„æƒ…å†µï¼‰
conda create --prefix=D:\Computer\Anaconda\envs\mineru python=3.10 
# --prefix å‚æ•°çš„å«ä¹‰æ˜¯ï¼šæŒ‡å®šè·¯å¾„å‰ç¼€ï¼Œè®¾ç½®å®‰è£…è·¯å¾„çš„å‰ç¼€éƒ¨åˆ†
conda activate mineru
```

åˆ›å»ºå®Œæˆåï¼Œä½ ä¼šçœ‹åˆ°å‘½ä»¤è¡Œå‰é¢å‡ºç° `(mineru)` æ ‡è¯†ï¼Œè¯´æ˜ç¯å¢ƒæ¿€æ´»æˆåŠŸã€‚

## ğŸ› ï¸ ç¬¬äºŒæ­¥ï¼šå®‰è£…MinerU

æ¥ä¸‹æ¥æˆ‘ä»¬å¼€å§‹æ­£å¼å®‰è£…MinerUã€‚

### 2.1 GPUç‰ˆæœ¬å®‰è£…ï¼ˆæœ‰æ˜¾å¡æ¨èï¼‰

å¦‚æœä½ æœ‰NVIDIAæ˜¾å¡ï¼Œå¼ºçƒˆæ¨èä½¿ç”¨GPUç‰ˆæœ¬ï¼Œé€Ÿåº¦ä¼šå¿«å¾ˆå¤šï¼š

```bash
# 1. å®‰è£…åŒ…ç®¡ç†å·¥å…·
pip install uv

# 2. æ¸…ç†æ—§ç‰ˆæœ¬ï¼ˆé˜²æ­¢å†²çªï¼‰
pip uninstall mineru -y
# -y è¡¨ç¤º "yes"ï¼Œå³è‡ªåŠ¨ç¡®è®¤å¸è½½æ“ä½œï¼Œæ— éœ€æ‰‹åŠ¨è¾“å…¥ "y" æˆ– "yes" æ¥ç¡®è®¤

# 3. å®‰è£…MinerUå®Œæ•´ç‰ˆæœ¬
uv pip install -U "mineru[core]" -i https://mirrors.aliyun.com/pypi/simple
# -U å«ä¹‰ï¼š--upgrade çš„ç®€å†™ï¼Œä½œç”¨ï¼šå‡çº§å·²å®‰è£…çš„åŒ…åˆ°æœ€æ–°ç‰ˆæœ¬
# -i å«ä¹‰ï¼š--index-url çš„ç®€å†™ï¼Œä½œç”¨ï¼šæŒ‡å®š pip å®‰è£…åŒ…çš„é•œåƒæº

# 4. å®‰è£…PyTorch GPUç‰ˆæœ¬ï¼ˆæ ¹æ®CUDAç‰ˆæœ¬é€‰æ‹©ï¼‰
# CUDA 12.1ç”¨æˆ·
pip install torch==2.5.1 torchvision==0.20.1 torchaudio==2.5.1 --index-url https://download.pytorch.org/whl/cu121
```
### 2.2 éªŒè¯å®‰è£…

å®‰è£…å®Œæˆåï¼Œè®©æˆ‘ä»¬éªŒè¯ä¸€ä¸‹æ˜¯å¦å®‰è£…æˆåŠŸï¼š

```bash
# æŸ¥çœ‹ç‰ˆæœ¬ä¿¡æ¯
mineru --version

# æŸ¥çœ‹å¸®åŠ©ä¿¡æ¯
mineru --help
```

å¦‚æœèƒ½æ­£å¸¸è¾“å‡ºç‰ˆæœ¬å·å’Œå¸®åŠ©ä¿¡æ¯ï¼Œè¯´æ˜å®‰è£…æˆåŠŸäº†ï¼


## ğŸ“¥ ç¬¬ä¸‰æ­¥ï¼šä¸‹è½½æ¨¡å‹æ–‡ä»¶

MinerUéœ€è¦ä¸‹è½½ä¸€äº›æ¨¡å‹æ–‡ä»¶æ‰èƒ½æ­£å¸¸å·¥ä½œï¼Œè¿™ä¸€æ­¥éå¸¸é‡è¦ï¼š

### è‡ªåŠ¨ä¸‹è½½æ‰€æœ‰æ¨¡å‹ï¼ˆæ¨èï¼‰

```bash
# ä¸‹è½½æ‰€æœ‰å¿…è¦çš„æ¨¡å‹æ–‡ä»¶ï¼ˆå¤§çº¦8-12GBï¼‰
mineru-models-download --model_type all
```

**æ³¨æ„äº‹é¡¹ï¼š**
- é¦–æ¬¡ä¸‹è½½éœ€è¦æ¯”è¾ƒé•¿çš„æ—¶é—´ï¼Œè¯·è€å¿ƒç­‰å¾…
- å¦‚æœä¸‹è½½å¤±è´¥ï¼Œå¯ä»¥å¤šè¯•å‡ æ¬¡

## âœ… ç¬¬å››æ­¥ï¼šåŠŸèƒ½æµ‹è¯•

æ¨¡å‹ä¸‹è½½å®Œæˆåï¼Œæˆ‘ä»¬æ¥æµ‹è¯•ä¸€ä¸‹MinerUæ˜¯å¦èƒ½æ­£å¸¸å·¥ä½œï¼š

### 4.1 å‡†å¤‡æµ‹è¯•æ–‡ä»¶

é¦–å…ˆåˆ›å»ºä¸€ä¸ªæµ‹è¯•ç›®å½•ï¼Œå¹¶å‡†å¤‡ä¸€äº›PDFæ–‡ä»¶ï¼š

```bash
# åˆ›å»ºæµ‹è¯•ç›®å½•
mkdir test_pdfs
mkdir test_output

# å°†ä½ è¦æµ‹è¯•çš„PDFæ–‡ä»¶æ”¾åˆ°test_pdfsç›®å½•ä¸­
# æˆ–è€…ä¸‹è½½ä¸€äº›æµ‹è¯•æ–‡ä»¶
```

### 4.2 åŸºç¡€åŠŸèƒ½æµ‹è¯•

```bash
# æµ‹è¯•å•ä¸ªPDFæ–‡ä»¶è§£æï¼ˆPipelineæ¨¡å¼ï¼Œé€Ÿåº¦å¿«ï¼‰
mineru -p ./pdfs/demo1.pdf -o ./test_output/ --backend pipeline

# å¦‚æœä½ æœ‰NVIDIAæ˜¾å¡ï¼Œå¯ä»¥å¯ç”¨GPUåŠ é€Ÿ
mineru -p ./test_pdfs/your_file.pdf -o test_output/ --backend pipeline --device cuda
```

### 4.3 é«˜ç²¾åº¦æ¨¡å¼æµ‹è¯•

```bash
# VLMæ¨¡å¼ï¼ˆç²¾åº¦æ›´é«˜ï¼Œä½†é€Ÿåº¦è¾ƒæ…¢ï¼‰
mineru -p ./pdfs/demo0.pdf -o test_output/ --backend vlm-transformers --device cuda

# CPUç”¨æˆ·è¯·ç”¨è¿™ä¸ªå‘½ä»¤
mineru -p ./test_pdfs/your_file.pdf -o test_output/ --backend vlm-transformers --device cpu
```

### 4.4 æ‰¹é‡å¤„ç†æµ‹è¯•

```bash
# æ‰¹é‡å¤„ç†æ•´ä¸ªæ–‡ä»¶å¤¹çš„PDF
mineru -p ./pdfs -o test_output/ --backend pipeline --batch-size 8
```

## ğŸŒ ç¬¬äº”æ­¥ï¼šå¯åŠ¨Webç•Œé¢

MinerUè¿˜æä¾›äº†ä¸€ä¸ªå‹å¥½çš„Webç•Œé¢ï¼Œè®©æˆ‘ä»¬å¯ä»¥é€šè¿‡æµè§ˆå™¨æ¥ä½¿ç”¨ï¼š

### 5.1 å¯åŠ¨WebæœåŠ¡

```bash
# ç¡®ä¿åœ¨æ­£ç¡®çš„ç¯å¢ƒä¸­
conda activate mineru

# å¯åŠ¨Webç•Œé¢æœåŠ¡
mineru-gradio --server-port 8080
```

### 5.2 è®¿é—®Webç•Œé¢

å¯åŠ¨æˆåŠŸåï¼Œåœ¨æµè§ˆå™¨ä¸­è®¿é—®ï¼š**http://localhost:8080**

ä½ å°†çœ‹åˆ°ä¸€ä¸ªæ¼‚äº®çš„Webç•Œé¢ï¼Œå¯ä»¥ç›´æ¥ä¸Šä¼ PDFæ–‡ä»¶è¿›è¡Œè§£æï¼

### 5.3 å¸¸è§é—®é¢˜è§£å†³

**å¦‚æœWebç•Œé¢å¯åŠ¨å¤±è´¥ï¼Œå¯ä»¥å°è¯•ä»¥ä¸‹è§£å†³æ–¹æ¡ˆï¼š**

1. **æ›´æ¢ç«¯å£**ï¼š
```bash
# å°è¯•ä½¿ç”¨å…¶ä»–ç«¯å£
mineru-gradio --server-port 7860
```

2. **é‡ç½®ç½‘ç»œé…ç½®**ï¼ˆWindowsç”¨æˆ·ï¼‰ï¼š
```bash
# ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œå‘½ä»¤æç¤ºç¬¦ï¼Œä¾æ¬¡æ‰§è¡Œï¼š
netsh winsock reset
netsh int ip reset
ipconfig /flushdns
```
é‡å¯ç”µè„‘åå†æ¬¡å°è¯•å¯åŠ¨ã€‚

## ğŸš€ ç¬¬å…­æ­¥ï¼šåœ¨çº¿ä½“éªŒä¸å¼€æºåœ°å€

**æ— éœ€æœ¬åœ°éƒ¨ç½²ï¼Œç›´æ¥åœ¨çº¿ä½“éªŒMinerU**ï¼š  
  [MinerUåœ¨çº¿ä½“éªŒåœ°å€](https://mineru.net)

**æŸ¥çœ‹/å‚ä¸å¼€æºé¡¹ç›®ï¼Œè·å–æœ€æ–°ä»£ç ä¸æ–‡æ¡£**ï¼š  
  [MinerU GitHubå¼€æºä»“åº“](https://github.com/opendatalab/MinerU)

## ğŸ¯ æ€»ç»“

æ­å–œä½ ï¼ç°åœ¨ä½ å·²ç»æˆåŠŸéƒ¨ç½²äº†MinerU2.5æ–‡æ¡£è§£æå¤§æ¨¡å‹ã€‚

### ğŸ“‹ ä½¿ç”¨è¦ç‚¹å›é¡¾

1. **ç¯å¢ƒæ¿€æ´»**ï¼šæ¯æ¬¡ä½¿ç”¨å‰è®°å¾—æ¿€æ´»ç¯å¢ƒ
   ```bash
   conda activate mineru
   ```

2. **ä¸¤ç§ä½¿ç”¨æ–¹å¼**ï¼š
   - **å‘½ä»¤è¡Œæ¨¡å¼**ï¼šé€‚åˆæ‰¹é‡å¤„ç†å’Œè„šæœ¬è‡ªåŠ¨åŒ–
   - **Webç•Œé¢æ¨¡å¼**ï¼šé€‚åˆæ—¥å¸¸ä½¿ç”¨ï¼Œç•Œé¢å‹å¥½

3. **æ€§èƒ½å»ºè®®**ï¼š
   - æœ‰NVIDIAæ˜¾å¡çš„ç”¨æˆ·ä¼˜å…ˆä½¿ç”¨GPUæ¨¡å¼
   - å¤§æ–‡ä»¶å»ºè®®ä½¿ç”¨Pipelineæ¨¡å¼ï¼ˆé€Ÿåº¦å¿«ï¼‰
   - éœ€è¦æœ€é«˜ç²¾åº¦æ—¶ä½¿ç”¨VLMæ¨¡å¼

4. **å¸¸ç”¨å‘½ä»¤**ï¼š
   ```bash
   # å•æ–‡ä»¶å¤„ç†
   mineru -p your_file.pdf -o output/ --backend pipeline --device cuda
   
   # æ‰¹é‡å¤„ç†
   mineru -p pdf_folder/ -o output/ --backend pipeline --batch-size 4
   
   # å¯åŠ¨Webç•Œé¢
   mineru-gradio --server-port 8080
   ```

---

# NVDIA 5090 vLLMéƒ¨ç½²æŒ‡ä»¤

ç›®å‰æœ€æ–°ç‰ˆçš„ MinerU ä»…å¯¹ vLLM è¿›è¡Œäº†æ”¯æŒï¼Œè¯·ç¡®ä¿åœ¨ Linux ç¯å¢ƒä¸‹è¿›è¡Œéƒ¨ç½²ï¼ŒWindows ç”¨æˆ·è¯·ç¡®ä¿å·²ç»å®‰è£…å¥½äº† WSL 2ï¼ŒåŒæ—¶ç¡®ä¿ Cuda å·²ç»æ­£ç¡®å®‰è£…ã€‚æ¢å¥è¯è¯´ï¼Œä½ è‡³å°‘è¦æœ‰20ç³»ä»¥ä¸Šçš„ N å¡ï¼Œæ‰èƒ½ä½“éªŒæœ€æ–°ç‰ˆã€‚

## ç¬¬ä¸€æ­¥ï¼šç¯å¢ƒå‡†å¤‡

é¦–å…ˆæ‰“å¼€ Windows ç»ˆç«¯ï¼Œæˆ–åœ¨ Windwos ä¸‹è¿è¡Œ WSL2ã€‚

1. **å»ºç«‹è™šæ‹Ÿç©ºé—´**

```bash
 conda create -n <ç©ºé—´å> python=3.12 -y
```

2. **æ¿€æ´»è™šæ‹Ÿè¿è¡Œç©ºé—´**

```bash
conda activate <ç©ºé—´å>
```

3. **å®‰è£…uvå·¥å…·**
```bash
pip install --upgrade uv
```

## ç¬¬äºŒæ­¥ï¼šå®‰è£…vLLM

> vLLM ä¸åŒç‰ˆæœ¬å¯¹`PyTorch FlashAttention`ã€`Transformer`çš„ç‰ˆæœ¬å¯¹åº”æœ‰æ˜ç¡®çš„è¦æ±‚ã€‚ä»¥ä¸‹å‘½ä»¤ä¸ºé’ˆå¯¹ NVIDIA 5090ç³»æ˜¾å¡è¿è¡Œçš„æŒ‡ä»¤ã€‚

4. **åœ¨å·²ç»æ¿€æ´»çš„è™šæ‹Ÿç©ºé—´ä¸­éƒ¨ç½²vLLM**

```bash
# å®‰è£… flash-attn å·¥å…·
pip install https://github.com/Dao-AILab/flash-attention/releases/download/v2.8.2/flash_attn-2.8.2+cu12torch2.7cxx11abiFALSE-cp312-cp312-linux_x86_64.whl
```

5. **å®‰è£… vLLM ä¸å¯¹åº”çš„ Pytorch ç‰ˆæœ¬**

```bash
# å®‰è£… vLLM 0.10.0 ç‰ˆæœ¬ä¸ Pytorch ç‰ˆæœ¬
pip install vllm==0.10.0 --extra-index-url https://download.pytorch.org/whl/cu128
```

6. **å®‰è£… Transformers**

```bash
pip install --upgrade transformers==4.53.2
```

## ç¬¬ä¸‰æ­¥ï¼šéƒ¨ç½² MinerU

7. **éƒ¨ç½² MinerU**

```bash
uv pip install mineru[all]
```

8. **ç¡®è®¤ç‰ˆæœ¬å·å‡ºç°ï¼Œè¡¨ç¤ºéƒ¨ç½²æˆåŠŸ**

```bash
mineru -v
```

9. **å¯åŠ¨ vLLM åç«¯**

```bash
mineru-vllm-server --port <ç«¯å£å·>
# é¦–æ¬¡å¯åŠ¨éœ€è¦ä¸‹è½½æ¨¡å‹ï¼Œè¯·ç¡®ä¿å›½é™…ç½‘ç»œç•…é€š
```
> **æç¤º**ï¼šå½“å‡ºç°ä¸‹åˆ—ä¸‰è¡Œä»£ç ï¼Œè¡¨ç¤º MinerU vLLM åç«¯å¯åŠ¨æˆåŠŸ
```bash
[INFO: Started server process [606]
[INFO: Waiting for application startup.
[INFO: Waiting Application startup complete
```
**ä¸è¦å…³é—­è¯¥ç»ˆç«¯**ï¼šé‡æ–°æ‰“å¼€ä¸€ä¸ªç»ˆç«¯ï¼ŒWindows ç³»ç»Ÿæ— éœ€é‡å¼€ WSL2 çª—å£ï¼Œå¯ä»¥ä½¿ç”¨è‡ªå¸¦çš„ CMD ç»ˆç«¯ã€‚

10. **åˆ›å»º MinerU è½»é‡çº§å®¢æˆ·ç«¯è¿è¡Œç©ºé—´**

```bash
conda create -n <ç©ºé—´å> python=3.12 -y
```

11. **æ¿€æ´»è½»é‡çº§å®¢æˆ·ç«¯è™šæ‹Ÿè¿è¡Œç©ºé—´**

```bash
conda activate <ç©ºé—´å>
```

12. **å®‰è£… MinerU è½»é‡çº§å®¢æˆ·ç«¯**

```bash
uv pip install mineru
```

13. **å‘½ä»¤è¡Œå¤„ç†æ¨¡å¼**

```bash
# éœ€ä¿æŒ MinerU vLLM åç«¯å¤„äº
è¿è¡ŒçŠ¶æ€
mineru -p <input_path> -o <output_path> -b vlm-http-client -u http://127.0.0.1:30000
```